<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¢ Regla de Sarrus</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="bg-dark text-white">

<div class="container mt-5 p-4 rounded-3 bg-secondary">
    <h2 class="mb-4 text-center">ğŸ”¢ Regla de Sarrus</h2>
    
    <div id="inputs"></div>
    
    <div class="mt-3">
        <button class="btn btn-primary" onclick="calcularDeterminante()">ğŸ§® Calcular Determinante</button>
        <button class="btn btn-danger ms-2" onclick="reiniciar()">ğŸ”„ Reiniciar</button>
    </div>

    <h4 class="mt-4">ğŸ‰ Resultado:</h4>
    <div id="resultado" class="alert alert-info" role="alert"></div>

    <h4 class="mt-4">ğŸ“œ Procedimiento:</h4>
    <div id="procedimiento" class="alert alert-light text-dark" role="alert"></div>
</div>

<footer class="bg-dark text-center text-white py-3 mt-4">
    <p>Creado por <strong>Jaime Fernando Berrios Ortiz</strong></p>
</footer>

<script>
    let entradas = [];

    function calcularDeterminante() {
        try {
            const matriz = [];
            let procedimiento = "<strong>Paso a paso:</strong><br>";

            for (let i = 0; i < 3; i++) {
                const fila = [];
                for (let j = 0; j < 3; j++) {
                    const valor = parseFloat(entradas[i][j].value);
                    if (isNaN(valor)) {
                        alert("âš ï¸ Ingrese valores numÃ©ricos vÃ¡lidos.");
                        return;
                    }
                    fila.push(valor);
                }
                matriz.push(fila);
            }

            const matrizExtendida = [...matriz, matriz[0], matriz[1]];

            procedimiento += "<h5>ğŸ“Œ Matriz Original y Extendida:</h5>";
            procedimiento += `<div class="d-flex justify-content-around">
                                <div>${generarTabla(matriz, "Matriz Original")}</div>
                                <div>${generarTabla(matrizExtendida, "Matriz Extendida")}</div>
                              </div>`;

            let diagonalesPrincipales = [
                matriz[0][0] * matriz[1][1] * matriz[2][2],
                matriz[0][1] * matriz[1][2] * matriz[2][0],
                matriz[0][2] * matriz[1][0] * matriz[2][1]
            ];
            let suma = diagonalesPrincipales.reduce((a, b) => a + b, 0);

            let diagonalesSecundarias = [
                matriz[2][0] * matriz[1][1] * matriz[0][2],
                matriz[2][1] * matriz[1][2] * matriz[0][0],
                matriz[2][2] * matriz[1][0] * matriz[0][1]
            ];
            let resta = diagonalesSecundarias.reduce((a, b) => a + b, 0);

            let determinante = suma - resta;

            procedimiento += "<h5>âœ… Paso 1: Producto de diagonales principales:</h5>";
            procedimiento += generarExpresion(diagonalesPrincipales, suma, true);

            procedimiento += "<h5>âŒ Paso 2: Producto de diagonales secundarias:</h5>";
            procedimiento += generarExpresion(diagonalesSecundarias, resta, false);

            procedimiento += `<h5>ğŸ¯ Paso 3: Restamos los valores obtenidos:</h5>`;
            procedimiento += `<p class="fw-bold text-success">${suma} - ${resta} = <strong>${determinante}</strong></p>`;

            document.getElementById("resultado").innerHTML = `<strong>Determinante:</strong> ${determinante.toFixed(2)}`;
            document.getElementById("procedimiento").innerHTML = procedimiento;
        } catch (e) {
            alert("âš ï¸ Hubo un error en el cÃ¡lculo.");
            console.error(e);
        }
    }

    function crearCampos() {
        const inputsDiv = document.getElementById('inputs');
        inputsDiv.innerHTML = '<h4 class="mb-3">ğŸ“ Ingrese los valores de la matriz 3x3:</h4>';
        
        entradas = [];
        for (let i = 0; i < 3; i++) {
            const fila = document.createElement('div');
            fila.className = 'mb-3';
            for (let j = 0; j < 3; j++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.inputMode = 'decimal';
                input.className = 'form-control d-inline-block w-auto';
                input.style = 'margin-right: 5px';
                input.placeholder = `a${i + 1}${j + 1}`;
                fila.appendChild(input);
                if (!entradas[i]) entradas[i] = [];
                entradas[i].push(input);
            }
            inputsDiv.appendChild(fila);
        }
    }

    function reiniciar() {
        entradas = [];
        document.getElementById('inputs').innerHTML = '';
        document.getElementById('resultado').innerText = '';
        document.getElementById('procedimiento').innerText = '';
        crearCampos();
    }

    function generarTabla(matriz, titulo) {
        let tabla = `<h6 class="text-center">${titulo}</h6><table class="table table-bordered table-light text-center w-auto">`;
        matriz.forEach(fila => {
            tabla += '<tr>';
            fila.forEach(valor => {
                tabla += `<td><strong>${valor}</strong></td>`;
            });
            tabla += '</tr>';
        });
        tabla += '</table>';
        return tabla;
    }

    function generarExpresion(diagonales, resultado, esPrincipal) {
        let color = esPrincipal ? "text-success" : "text-danger";
        let expresion = `<p class="${color}">`;
        expresion += diagonales.map(val => `<strong>${val}</strong>`).join(" + ");
        expresion += ` = <strong>${resultado}</strong></p>`;
        return expresion;
    }

    window.onload = crearCampos;
</script>

</body>
</html>
